<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{% block title %}Peerexo.com{% endblock %}</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-white dark:bg-gray-900 text-gray-900 dark:text-white">
  <header class="flex justify-between items-center p-4 shadow-md dark:shadow-none">        
    <h1 class="text-2xl font-bold"><a href="{%url 'core:home'%}">Peerexo.com</a></h1>
    <div class="flex items-center space-x-4">
      <!-- Theme toggle button -->
      <button onclick="toggleTheme()"
              class="p-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-600 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500">
        <span id="theme-icon" class="text-xl">ðŸŒ™</span>
      </button>

      <!-- Navigation -->
      <nav class="flex items-center space-x-2">
        <a href="{%url 'core:updates'%}" class="px-3 py-2 hover:text-blue-600 dark:hover:text-blue-400">Updates</a>

        {% if user.is_authenticated %}
          <a href="{%url 'core:dashboard'%}" class="px-3 py-2 hover:text-blue-600 dark:hover:text-blue-400">Dashboard</a>
          <a href="{%url 'core:wallet'%}" class="px-3 py-2 hover:text-blue-600 dark:hover:text-blue-400">Wallet</a>
          <a href="{%url 'core:verification'%}" class="px-3 py-2 hover:text-blue-600 dark:hover:text-blue-400">Verification Center</a>
          <a href="{%url 'account_logout'%}" class="px-3 py-2 hover:text-red-600 dark:hover:text-red-400">Logout</a>
        {% else %}
          <a href="{%url 'account_login'%}" class="px-3 py-2 hover:text-blue-600 dark:hover:text-blue-400">Login</a>
          <a href="{%url 'account_signup'%}" class="px-3 py-2 hover:text-blue-600 dark:hover:text-blue-400">Register</a>
        {% endif %}
      </nav>
    </div>
  </header>

  <main class="p-6">
    {% block content %}
    {% endblock %}
  </main>

  <!-- FOOTER -->
  <footer class="bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 py-6 transition-all duration-300">
    <div class="container mx-auto px-4 text-center text-gray-500 dark:text-gray-400">
      <p>&copy; {% now "Y" %} Peerexo.com. All rights reserved.</p>
      <p class="mt-2"><a href="https://t.me/peerexo" class="hover:underline">Join us on Telegram</a></p>
    </div>
  </footer>

  <!-- DARK MODE SCRIPT -->
  <script>
    function applyTheme(mode) {
      const html = document.documentElement;
      const icon = document.getElementById('theme-icon');
      if (mode === 'dark') {
        html.classList.add('dark');
        if (icon) icon.textContent = 'â˜€ï¸';
      } else {
        html.classList.remove('dark');
        if (icon) icon.textContent = 'ðŸŒ™';
      }
    }

    function initTheme() {
      let theme = localStorage.getItem('theme');
      if (!theme) {
        theme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
      }
      applyTheme(theme);
    }

    function toggleTheme() {
      const isDark = document.documentElement.classList.contains('dark');
      const newTheme = isDark ? 'light' : 'dark';
      localStorage.setItem('theme', newTheme);
      applyTheme(newTheme);
    }

    initTheme();
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
      if (!localStorage.getItem('theme')) {
        applyTheme(e.matches ? 'dark' : 'light');
      }
    });
  </script>
</body>
</html>

