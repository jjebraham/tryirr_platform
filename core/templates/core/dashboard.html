{# core/templates/core/dashboard.html #}
{% extends "core/base.html" %}
{% load i18n %}

{% block title %}{% trans "Dashboard" %}{% endblock %}

{% block content %}
<div class="max-w-7xl mx-auto">

<h1 class="text-3xl font-bold text-gray-900 dark:text-gray-100 mb-8">
    {% trans "Dashboard" %}
</h1>
<div class="mb-6">
  <a href="{% url 'core:kyc' %}" class="px-4 py-2 bg-blue-600 text-white rounded">
    {% trans "Verification Center" %}
  </a>
</div>

  <div class="mb-6 p-4 bg-white dark:bg-gray-800 rounded-lg shadow">
    <p class="text-gray-700 dark:text-gray-300">
      {% trans "Verification Level:" %} {{ request.user.kyc_level }}
      {% if request.user.kyc_level < 1 %}
        - <a href="{% url 'core:kyc' %}" class="text-blue-600 dark:text-blue-400 hover:underline">{% trans "Verify now" %}</a>
      {% endif %}
    </p>
  </div>

  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
    <!-- Exchange Rates Card -->
    <div class="card">
      <div class="card-header">
        <h2 class="text-xl font-semibold">
          {% trans "Exchange Rates" %}
        </h2>
      </div>
      <div class="p-4 space-y-2">
        {% if rates.TRY_IRR %}
          <div class="flex justify-between text-gray-700 dark:text-gray-300">
            <span>1 TRY →</span>
            <span>{{ rates.TRY_IRR|floatformat:2 }} IRR</span>
          </div>
          <div class="flex justify-between text-gray-700 dark:text-gray-300">
            <span>1 IRR →</span>
            <span>{{ rates.IRR_TRY|floatformat:6 }} TRY</span>
          </div>
        {% else %}
          <p class="text-red-500">
            {% trans "Unable to fetch live rates right now." %}
          </p>
        {% endif %}
      </div>
    </div>

    <!-- Your Balances Card -->
    <div class="card">
      <div class="card-header">
        <h2 class="text-xl font-semibold">
          {% trans "Your Balances" %}
        </h2>
      </div>
      <div class="p-4">
        <p class="text-gray-600 dark:text-gray-400">
          {% trans "Coming soon…" %}
        </p>
      </div>
    </div>
  </div>

  <!-- Instant Converter Card -->
  <div class="card mb-8">
    <div class="card-header">
      <h2 class="text-xl font-semibold">
        {% trans "Instant Converter" %}
      </h2>
    </div>
    <div class="p-4">
      <form method="get" class="flex flex-wrap items-end gap-4">
        <div class="flex-1 min-w-[120px]">
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
            {% trans "Convert:" %}
          </label>
          {{ conversion_form.direction }}
        </div>
        <div class="flex-1 min-w-[120px]">
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
            {% trans "Amount:" %}
          </label>
          {{ conversion_form.amount }}
        </div>
        <div>
          <button type="submit" class="btn-primary">
            {% trans "Convert" %}
          </button>
        </div>
        {% if conversion_result is not None %}
          <div class="w-full mt-4">
            <p class="text-lg font-medium text-gray-900 dark:text-gray-100">
              {% trans "Result:" %} 
              {{ conversion_result|floatformat:2 }}
            </p>
          </div>
        {% endif %}
      </form>
    </div>
  </div>

</div>
{% endblock %}

