{% extends "core/base.html" %}
{% block title %}Offers{% endblock %}
{% block content %}
<h1 class="text-2xl font-bold mb-4">Offers</h1>
<form method="get" class="flex flex-wrap gap-2 mb-4 items-end">
  <select name="pair" class="border rounded p-2">
    <option value="">All pairs</option>
    <option value="IRR/TL" {% if request.GET.pair == 'IRR/TL' %}selected{% endif %}>IRR → TL</option>
    <option value="TL/IRR" {% if request.GET.pair == 'TL/IRR' %}selected{% endif %}>TL → IRR</option>
  </select>
  <input type="number" step="0.01" name="min" placeholder="Min" value="{{ request.GET.min }}" class="border rounded p-2">
  <input type="number" step="0.01" name="max" placeholder="Max" value="{{ request.GET.max }}" class="border rounded p-2">
  <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded">Filter</button>
  <a href="{% url 'core:offer_create' %}" class="ml-auto px-4 py-2 bg-green-600 text-white rounded">New Offer</a>
</form>
<table class="w-full text-sm">
  <thead>
    <tr class="bg-gray-100 dark:bg-gray-700">
      <th class="px-2 py-1">User</th>
      <th class="px-2 py-1">Type</th>
      <th class="px-2 py-1">Pair</th>
      <th class="px-2 py-1 text-right">Amount</th>
      <th class="px-2 py-1 text-right">Rate</th>
      <th class="px-2 py-1"></th>
    </tr>
  </thead>
  <tbody>
    {% for offer in offers %}
    <tr class="border-b dark:border-gray-700">
      <td class="px-2 py-1">{{ offer.user }}</td>
      <td class="px-2 py-1">{{ offer.get_type_display }}</td>
      <td class="px-2 py-1">{{ offer.get_currency_pair_display }}</td>
      <td class="px-2 py-1 text-right">{{ offer.amount }}</td>
      <td class="px-2 py-1 text-right">{{ offer.rate }}</td>
      <td class="px-2 py-1"><a href="{% url 'core:offer_detail' offer.pk %}" class="text-blue-600">View</a></td>
    </tr>
    {% empty %}
    <tr><td colspan="6" class="text-center py-4">No offers found.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
